<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
    <head>
        <title>Admin Page</title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    </head>
    <body>
      <p>Product Manage</p>
      <form action="/admin/new" name="product_form" method="get">
        <button>add product</button>
      </form>
      <div>
        <table>
          <thead>
            <tr>
              <th>ID</th> 
              <th>Name</th>
              <th>Price</th>
              <th>ImageUrl</th>
            </tr>
          </thead>
          <tbody>
            <tr th:each="product : ${paging.productList}">
              <td th:text="${product.id}"></td>
              <td th:text="${product.name}"></td>
              <td th:text="${product.price}"></td>
              <td th:text="${product.imageUrl}"></td>
              <td> 
                <form th:action="@{'/admin/edit/' + ${product.id}}" method="get">
                  <button type="submit">Edit</button>
                </form>
                <form th:action="@{'/admin/delete/' + ${product.id}}" method="post">
                  <button type="submit">Delete</button>
                </form>
              </td>
            </tr>
          </tbody>
        </table>

        <div th:if="${paging.totalPages > 0}">
                 <ul class="pagination justify-content-center">
                     <li class="page-item" th:classappend="${!paging.hasPrevious} ? 'disabled'">
                         <a class="page-link"
                          th:href="@{|?page=${paging.currentPage-1}|}">
                            <span>이전</span>
                         </a>
                     </li>
                     <li th:each="page: ${#numbers.sequence(0, paging.totalPages-1)}"
                          th:if="${page >= paging.currentPage-5 and page <= paging.currentPage+5}"
                          th:classappend="${page == paging.currentPage} ? 'active'" 
                          class="page-item">
                         <a th:text="${page}" class="page-link" th:href="@{|?page=${page}|}"></a>
                      </li>
                      <li class="page-item" th:classappend="${!paging.hasNext} ? 'disabled'">
                          <a class="page-link" th:href="@{|?page=${paging.currentPage+1}|}">
                            <span>다음</span>
                          </a>
                      </li>
                  </ul>
              </div>

      </div>
    </body>
</html>