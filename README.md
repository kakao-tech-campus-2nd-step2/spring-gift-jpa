# spring-gift-jpa

## 기능 요구 사항

### Step1

지금까지 작성한 JdbcTemplate 기반 코드를 JPA로 리팩터링

* 아래의 DDL(Data Definition Language)을 보고 유추

<pre id="sql-light-8jgop9719p" class="hljs-code-block overflow-hidden relative d-flex mt-3 mb-8"><button type="button" class="clipboard-btn v-btn v-btn--flat v-btn--icon v-btn--round theme--light v-size--default absolute right-10 top-10 z-1 grey--text text--lighten-2"><span class="v-btn__content"><i aria-hidden="true" class="v-icon notranslate mdi mdi-clipboard theme--light"></i></span></button><code class="relative pa-4 lh-1-3 text-normal width-100 ls-0
                   language-sql light hljs">create table member
(
    id       bigint generated by default as identity,
    email    varchar(255) not null unique,
    password varchar(255) not null,
    primary key (id)
)
</code></pre>

<pre id="sql-light-t1poddfx7c" class="hljs-code-block overflow-hidden relative d-flex mt-3 mb-8"><button type="button" class="clipboard-btn v-btn v-btn--flat v-btn--icon v-btn--round theme--light v-size--default absolute right-10 top-10 z-1 grey--text text--lighten-2"><span class="v-btn__content"><i aria-hidden="true" class="v-icon notranslate mdi mdi-clipboard theme--light"></i></span></button><code class="relative pa-4 lh-1-3 text-normal width-100 ls-0
                   language-sql light hljs">create table product
(
    price     integer      not null,
    id        bigint generated by default as identity,
    name      varchar(15)  not null,
    image_url varchar(255) not null,
    primary key (id)
)
</code></pre>

<pre id="sql-light-2r1ajfov8h" class="hljs-code-block overflow-hidden relative d-flex mt-3 mb-8"><button type="button" class="clipboard-btn v-btn v-btn--flat v-btn--icon v-btn--round theme--light v-size--default absolute right-10 top-10 z-1 grey--text text--lighten-2"><span class="v-btn__content"><i aria-hidden="true" class="v-icon notranslate mdi mdi-clipboard theme--light"></i></span></button><code class="relative pa-4 lh-1-3 text-normal width-100 ls-0
language-sql light hljs">create table wish
(
id         bigint generated by default as identity,
member_id  bigint not null,
product_id bigint not null,
primary key (id)
)</code></pre>


### Step2

지금까지 작성한 JdbcTemplate 기반 코드를 JPA로 리팩터링하고 실제 도메인 모델을 어떻게 구성하고 객체와 테이블을 어떻게 매핑해야 하는지 알아본다.

* 객체의 참조와 테이블의 외래 키를 매핑해서 객체에서는 참조를 사용하고 테이블에서는 외래 키를 사용할 수 있도록 한다.



## 구현한 기능

### Step1

- 기존 domain구조를 위 예시의 DDL 구조로 수정.
- JPA를 활용한 entity클래스와 JpaRepository를 상속한 repository 생성
- @DataJpaTest를 통한 테스트

### Step2

- @ManyToOne을 사용해 Wish Entity의 연관관계 매핑
- 그에 따른 Service, Controller layer 리팩토링
- 여러 유효성 검증 추가
